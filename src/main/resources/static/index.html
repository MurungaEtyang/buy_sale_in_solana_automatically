<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phantom Wallet Integration</title>
</head>
<body>
<button id="connectButton">Connect to Phantom Wallet</button>
<p id="walletAddress"></p>

<script src="https://solana-labs.github.io/wallet-link/dist/walletlink.js"></script>
<script>
    document.getElementById('connectButton').addEventListener('click', async () => {
        // Check if Phantom Wallet is available
        try:
            if (window.walletlink) {
            const wallet = new window.walletlink.PhantomWallet();
            try {
                // Connect to the wallet
                await wallet.connect();

                // Retrieve the public key
                const publicKey = await wallet.getPublicKey();
                document.getElementById('walletAddress').textContent = `Connected to wallet with address: ${publicKey}`;

                // Log the public key to the console
                console.log('Public Key:', publicKey);

                // Now you can use this publicKey to interact with your Spring Boot application
                // For example, fetch the balance:
                fetch(`http://localhost:8080/balance?publicKey=${publicKey}`)
                    .then(response => response.text())
                    .then(data => console.log('Balance:', data))
                    .catch(error => console.error('Error fetching balance:', error));
            } catch (error) {
                console.error('User rejected the request or another error occurred:', error);
            }
        } else {
            alert('Phantom Wallet extension not found! Please install it from the Chrome Web Store.');
        }
        catch (error) {
            console.error('User rejected the request or another error occurred:', error);
        }
    });
</script>
</body>
</html>
